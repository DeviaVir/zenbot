version: '3.1'
services:
  server:
    image: 'deviavir/zenbot:unstable'
    volumes:
      - './conf.js:/app/conf.js'
      - './extensions:/app/extensions'
      - './simulations:/app/simulations'
      - './models:/app/models'
    links:
      - mongodb1
    restart: always
    tty: true
    depends_on:
      - mongodb1
    environment:
      - MONGODB_PORT_27017_TCP_ADDR=mongodb1
    entrypoint: /usr/local/bin/node
    ports:
      # added 8080 mapped to 80 for my own usage (defined port on conf.js), remove if you want or update your conf.js to show results on port 80 instead of a random port
      - '8080:80'
  mongodb1:
    #Using tutum mongodb because it allows to easily set user&password directly from docker-compose
    image: tutum/mongodb
    volumes:
      - './data:/data'
    ports:
      - '27017:27017'
    environment:
      - MONGODB_USER = YOUR-OWN-DATA # FAKE DATA JUST FOR COMMIT PURPOSES, DONT USE ("") just write them like - ENV = mydata
      - MONGODB_PASS = YOUR-OWN-DATA # FAKE DATA JUST FOR COMMIT PURPOSES, DONT USE ("") just write them like - ENV = mydata
      - MONGODB_DATABASE = YOUR-OWN-DATA # FAKE DATA JUST FOR COMMIT PURPOSES, DONT USE ("") just write them like - ENV = mydata
  adminmongo:
    image: mrvautin/adminmongo
    ports:
      - '1234:1234'
